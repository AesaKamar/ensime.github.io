h2. The ENSIME Manual

h4. Table of Contents
* 1 "Introduction":#intro
** 1.1 "What is ENSIME?":#whatIsEnsime
** 1.2 "Credit Where Credit is Due":#credits
* 2. "Installation":#install
** 2.1 "System Requirements":#sysReqs
** 2.2 "Installation from Git Repository (for ENSIME hackers)":#installFromZip
** 2.3 "For ENSIME Hackers":#installForHackers



<a name="intro"></a>

h1. 1 Introduction


<a name="whatIsEnsime"></a>

h1. 1.1 What is ENSIME?

<a name="credits"></a>

h1. 1.2 Credit where credit is due





<a name="install"></a>

h1. 2 Installation


<a name="sysReqs"></a>

h3. 2.1 System Requirements

* Emacs 22 or later.
* Unix-like OS or Windows. Note that you'll need to use bin/server.bat on windows.
* Java Runtime
* Scala 2.8 compatible source and libraries. 


h4. A note on binary compatibility





<a name="installFromZip"></a>

h3. 2.2 Standard Install

h4. scala-mode

ENSIME is designed to compliment scala-mode. scala-mode can be found in the Scala distribution under ./misc/scala-tool-support/emacs/

h4. ensime-mode

Download the latest ENSIME distribution from the github [downloads page](http://github.com/aemoncannon/ensime/downloads). Unpack the ENSIME distribution into a directory of your choosing. 

Add the following lines to your .emacs file:
    (require 'scala-mode)
    (add-to-list 'auto-mode-alist '("\\.scala$" . scala-mode))
    (add-to-list 'load-path "ENSIME_ROOT/elisp/")
    (require 'ensime)
    (add-hook 'scala-mode-hook 'ensime-scala-mode-hook)
    ;; MINI HOWTO: open .scala file. Ensure bin/server.sh is executable. M-x ensime

h4. Permissions

Verify that the startup script (usually bin/server.sh) has executable permissions.







<a name="installForHackers"></a>

h3. 2.3 Installation from Git Repository (for ENSIME hackers)

ENSIME is an sbt project and we have a custom sbt task, 'dist', that generates the distributable directory structure. When hacking ENSIME, you don't want to run the ensime server directly from the git clone. First, run 'sbt dist'. Then, follow the install instructions above, using CLONE_DIR/dist as your server-root.





<a name="projectConfig"></a>


h1. 3 Project Configuration


h3. 3.1 Generating a Config File

ENSIME has built-in support for generating configuration files. In Emacs, execute M-x ensime-config-gen. Follow directions in the mini-buffer to create a .ensime file for your project..  ENSIME will try to guess the type(sbt, mvn, etc) of your project, based on the files and directory structure. If the config generator does a poor job for your project, please let us know so we can improve it. And of course you can still create the .ensime file for your project manually. See the section on the .ensime format below.


h3. 3.2 Notes on Specific Project Types


h4. SBT


h4. Maven


h4. Ant + Ivy


h4. Other




h3. Usage

To enable ensime type M-x ensime. Follow the minibuffer instructions to specify the location of your .ensime project file. 

__TAB__    - Start completing a method/variable.

__C-c t  /  Double-Click__  - Inspect the type of the expression under the cursor.

__M-.  /  Control-Click__  - Jump to definition of symbol under cursor.

__M-,__  - Pop back to previously visited position.

__Double-Click(on an import statement)__  - Inspect the package under cursor.

__Mouse Hover__    - Echo the type of the expression under the cursor.

__C-c p__  - Inspect the package of the current source file.

__C-c o__  - Inspect the package specified in .ensime as :project-package.

__.__  - Forward one page in the inspector history.

__,__  - Backward one page in the inspector history.

__M-n  /  TAB__  - Forward one link in the inspector.

__M-p__  - Backward one link in the inspector.

__C-c C-a__  - Switch to the sbt command-line (works for sbt projects only)

__C-c C-z__  - Switch to the scala interpreter, with project classes in the classpath.

__C-c c__  - Type-check the current file.

__C-c a__  - Type-check all files in the project.

__M-x ensime-reload-config__  - Reload the .ensime file and recompile the project. Useful if you hit a server bug.

__M-x ensime-config-get__  - Start the automatic configuration file generator.




h3. Troubleshooting

You may want to examine the contents of the \*inferior-ensime-server\* buffer. This buffer collects the stdout and stderr of the server process, which is useful for debugging.



h3. Configuration Format

The .ensime file must be placed in the root directory of your project(or sub-project if you have a multi-module sbt build). The contents of the file must be a valid Emacs-Lisp S-Expression. 
<br/>
--------------------
<br/>
Here's a quick primer on ELisp values:
<br/>

__"..."__   -  A String

__t__   -  True

__nil__    -  False or opposite of t.

__(...)__    -  A literal list.

__:abcd123__   -  A keyword

__(:key1 val1 :key2 val2)__    -  A 'property list'. Acts like a literal dictionary, indexed by keyword.

<br/>
--------------------
<br/>
And now a description of all the available configuration options:
<br/>

__:server-root "...."__

* Required. The absolute path to the root of your ENSIME distribution. Note, this is not your project directory.
<br/>

__:server-cmd  "...."__

* The command with which to invoke the ENSIME server. By default, this will be set to "bin/server.sh" on Unix systems and "bin/server.bat" on Windows.
<br/>


__:server-host "...."__

* The host to connect to. Connecting to remote ENSIME servers is not currently supported (though it may work...)
<br/>


__:use-sbt [t|nil]__

* Assume a standard sbt directory structure. Look in default sbt locations for dependencies, sources, target, etc.
<br/>


__:sbt-compile-conf "...."__<br/>
__:sbt-runtime-conf "...."__

* Specify the names of dependency profiles to be used for compilation and runtime scenarios. Only necessary if you have custom configurations!
<br/>


__:sbt-compile-on-save [t|nil]__<br/>

* Should ENSIME issue a 'compile' command to sbt whenever you save a file? This is disabled by default as it consumes a lot of CPU.
<br/>

  
__:use-maven t__

* Use an existing pom.xml to determine the dependencies for the project. A Maven-style directory structure is assumed.
<br/>


__:maven-compile-scopes "...."__<br/>
__:maven-runtime-scopes "...."__

* Specify the names of dependency profiles to be used for compilation and runtime scenarios. Only necessary if you have custom scopes!
<br/>

__:use-ivy t__

* Use an existing ivy.xml to determine the dependencies for the project. A Maven-style directory structure is assumed.
<br/>


__:ivy-compile-conf "...."__<br/>
__:ivy-runtime-conf "...."__

* Specify the names of dependency profiles to be used for compilation and runtime scenarios. Only necessary if you have custom configurations!
<br/>


__:project-package "...."__

* The main scala package for your project. Used by ENSIME to populate the project outline view. 
<br/>


__:sources ([dir | file]*)__

* Manually include source files by directory(recursively) or by filename. If directory is given, only .scala and .java files will be considered.
<br/>


__:dependency-jars ([dir | file]*)__

* Manually include jars by directory(recursively) or by filename.
<br/>


__:compile-dependency-jars ([dir | file]*)__

* Manually include jars by directory(recursively) or by filename, to be included only at compile time.
<br/>


__:runtime-dependency-jars ([dir | file]*)__

* Manually include jars by directory(recursively) or by filename, to be included only at run time.
<br/>


__:dependency-dirs ([dir | file]*)__

* Manually include directories of .class files.
<br/>


__:target dir__

* Manually specify the target of the project build process. Should be the directory where .class files are written. The target is used to populate the classpath when launching the inferior scala repl and the debugger.
<br/>

* Appendix A [[GSOC Plan]]